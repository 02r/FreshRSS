"use strict";
<?php

$mark = $this->conf->mark_when;
$mail = Minz_Session::param ('mail', false);
$auto_actualize = Minz_Session::param('actualize_feeds', false);
$hide_posts = ($this->conf->display_posts ||
               Minz_Request::param('output') === 'reader');
$s = $this->conf->shortcuts;

echo 'var context={',
	'hide_posts:', $hide_posts ? 'false' : 'true', ',',
	'display_order:"', Minz_Request::param('order', $this->conf->sort_order), '",',
	'auto_mark_article:', $mark['article'] ? 'true' : 'false', ',',
	'auto_mark_site:', $mark['site'] ? 'true' : 'false', ',',
	'auto_mark_scroll:', $mark['scroll'] ? 'true' : 'false', ',',
	'auto_load_more:', $this->conf->auto_load_more ? 'true' : 'false', ',',
	'auto_actualize_feeds:', $auto_actualize ? 'true' : 'false', ',',
	'does_lazyload:', $this->conf->lazyload ? 'true' : 'false', ',',
	'sticky_post:', $this->conf->sticky_post ? 'true' : 'false', ',',
	'html5_notif_timeout:', $this->conf->html5_notif_timeout, ',',
	'auth_type:"', Minz_Configuration::authType(), '",',
	'current_user_mail:', $mail ? ('"' . $mail . '"') : 'null', ',',
	'current_view:"', Minz_Request::param('output', 'normal'), '"',
"},\n";

echo 'shortcuts={',
	'mark_read:"', $s['mark_read'], '",',
	'mark_favorite:"', $s['mark_favorite'], '",',
	'go_website:"', $s['go_website'], '",',
	'prev_entry:"', $s['prev_entry'], '",',
	'next_entry:"', $s['next_entry'], '",',
	'first_entry:"', $s['first_entry'], '",',
	'last_entry:"', $s['last_entry'], '",',
	'collapse_entry:"', $s['collapse_entry'], '",',
	'load_more:"', $s['load_more'], '",',
	'auto_share:"', $s['auto_share'], '",',
	'focus_search:"', $s['focus_search'], '",',
	'user_filter:"', $s['user_filter'], '",',
	'help:"', $s['help'], '",',
	'close_dropdown:"', $s['close_dropdown'], '"',
"},\n";

echo 'url={',
	'index:"', _url('index', 'index'), '",',
	'login:"', _url('index', 'login'), '",',
	'logout:"', _url('index', 'logout'), '",',
	'help:"', FRESHRSS_WIKI, '"',
"},\n";

echo 'i18n={',
	'confirmation_default:"', _t('confirm_action'), '",',
	'notif_title_articles:"', _t('notif_title_new_articles'), '",',
	'notif_body_articles:"', _t('notif_body_new_articles'), '",',
	'category_empty:"', _t('category_empty'), '"',
"},\n";

echo 'icons={',
	'close:\'', _i('close'), '\'',
"}\n";