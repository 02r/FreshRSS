<?php
	echo '"use strict";', "\n";
	$mark = $this->conf->markWhen ();
	echo 'var ',
		'hide_posts=', ($this->conf->displayPosts () === 'yes' || Minz_Request::param ('output') === 'reader') ? 'false' : 'true',
		',auto_mark_article=', $mark['article'] === 'yes' ? 'true' : 'false',
		',auto_mark_site=', $mark['site'] === 'yes' ? 'true' : 'false',
		',auto_mark_scroll=', $mark['scroll'] === 'yes' ? 'true' : 'false',
		',auto_load_more=', $this->conf->autoLoadMore () === 'yes' ? 'true' : 'false',
		',full_lazyload=', $this->conf->lazyload () === 'yes' && ($this->conf->displayPosts () === 'yes' || Minz_Request::param ('output') === 'reader') ? 'true' : 'false',
		',does_lazyload=', $this->conf->lazyload() === 'yes' ? 'true' : 'false';

	$s = $this->conf->shortcuts ();
	echo ',shortcuts={',
			'mark_read:"', $s['mark_read'], '",',
			'mark_favorite:"', $s['mark_favorite'], '",',
			'go_website:"', $s['go_website'], '",',
			'prev_entry:"', $s['prev_entry'], '",',
			'next_entry:"', $s['next_entry'], '",',
			'collapse_entry:"', $s['collapse_entry'], '",',
			'load_more:"', $s['load_more'], '"',
		"},\n";

	if (Minz_Request::param ('output') === 'global') {
		echo "iconClose='", FreshRSS_Themes::icon('close'), "',\n";
	}

	$mail = Minz_Session::param ('mail', 'null');
	if ($mail != 'null') {
		$mail = '"' . $mail . '"';
	}
	echo 'use_persona=', login_is_conf ($this->conf) ? 'true' : 'false',
		',url_freshrss="', _url ('index', 'index'), '",',
		'url_login="', _url ('index', 'login'), '",',
		'url_logout="', _url ('index', 'logout'), '",',
		'current_user_mail=', $mail, ",\n";

	echo 'load_shortcuts=', Minz_Request::controllerName () === 'index' && Minz_Request::actionName () === 'index' ? 'true' : 'false', ",\n";

	echo 'str_confirmation="', Minz_Translate::t('confirm_action'), '"', ",\n";

	$autoActualise = Minz_Session::param('actualize_feeds', false);
	echo 'auto_actualize_feeds=', $autoActualise ? 'true' : 'false', ";\n";
	if ($autoActualise) {
		Minz_Session::_param('actualize_feeds', false);
	}
